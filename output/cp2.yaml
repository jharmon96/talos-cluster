version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: MACHINE_TOKEN_PLACEHOLDER
  ca:
    crt: MACHINE_CA_CRT_PLACEHOLDER
    key: MACHINE_CA_KEY_PLACEHOLDER
  certSANs:
  - 172.22.40.10
  - 172.22.40.11
  - 172.22.40.12
  - 172.22.40.13
  kubelet:
    image: ghcr.io/siderolabs/kubelet:v1.33.0
    defaultRuntimeSeccompProfileEnabled: true
    disableManifestsDirectory: true
    extraArgs:
      rotate-server-certificates: "true"
  network:
    interfaces:
    - interface: ens18
      dhcp: false
      addresses:
      - 172.22.40.12/24
      routes:
      - network: 0.0.0.0/0
        gateway: 172.22.40.1
      vip:
        ip: 172.22.40.10
    nameservers:
    - 172.22.10.1
  install:
    disk: /dev/vda
    image: ghcr.io/siderolabs/installer:v1.10.2
    wipe: false
    extensions:
    - image: ghcr.io/siderolabs/qemu-guest-agent:9.2.0
    extraKernelArgs:
    - net.ifnames=0
  registries: {}
  features:
    rbac: true
    stableHostname: true
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      forwardKubeDNSToHost: true
  nodeLabels:
    node.kubernetes.io/exclude-from-external-load-balancers: ''
cluster:
  id: CLUSTER_ID_PLACEHOLDER
  secret: CLUSTER_SECRET_PLACEHOLDER
  controlPlane:
    endpoint: https://172.22.40.11:6443
  clusterName: my-k8s-cluster
  network:
    dnsDomain: cluster.local
    podSubnets:
    - 10.244.0.0/16
    serviceSubnets:
    - 10.96.0.0/12
  token: CLUSTER_TOKEN_PLACEHOLDER
  secretboxEncryptionSecret: SECRETBOX_ENCRYPTION_SECRET_PLACEHOLDER
  ca:
    crt: CLUSTER_CA_CRT_PLACEHOLDER
    key: CLUSTER_CA_KEY_PLACEHOLDER
  aggregatorCA:
    crt: AGGREGATOR_CA_CRT_PLACEHOLDER
    key: AGGREGATOR_CA_KEY_PLACEHOLDER
  serviceAccount:
    key: SERVICE_ACCOUNT_KEY_PLACEHOLDER
  apiServer:
    image: registry.k8s.io/kube-apiserver:v1.33.0
    certSANs:
    - 172.22.40.12
    - 172.22.40.10
    - 172.22.40.11
    - 172.22.40.12
    - 172.22.40.13
    disablePodSecurityPolicy: true
    admissionControl:
    - name: PodSecurity
      configuration:
        apiVersion: pod-security.admission.config.k8s.io/v1alpha1
        defaults:
          audit: restricted
          audit-version: latest
          enforce: baseline
          enforce-version: latest
          warn: restricted
          warn-version: latest
        exemptions:
          namespaces:
          - kube-system
          runtimeClasses: []
          usernames: []
        kind: PodSecurityConfiguration
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
      - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:v1.33.0
  proxy:
    image: registry.k8s.io/kube-proxy:v1.33.0
  scheduler:
    image: registry.k8s.io/kube-scheduler:v1.33.0
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: true
      service: {}
  etcd:
    ca:
      crt: ETCD_CA_CRT_PLACEHOLDER
      key: ETCD_CA_KEY_PLACEHOLDER
  extraManifests: []
  inlineManifests: []